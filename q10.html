<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Form Builder</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 30px;
    }
    .form-group {
      margin-bottom: 15px;
    }
    input {
      padding: 8px;
      width: 250px;
      border: 1px solid #ccc;
      border-radius: 5px;
      margin-top: 5px;
      display: block;
    }
    .message {
      font-size: 13px;
      margin-top: 3px;
    }
    .success {
      color: green;
    }
    .error {
      color: red;
    }
    select, button {
      padding: 8px 12px;
      margin-right: 10px;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <h2>Dynamic Form Builder</h2>

  <!-- Input type selector -->
  <label for="fieldType">Choose input type:</label>
  <select id="fieldType">
    <option value="text">Text</option>
    <option value="email">Email</option>
    <option value="password">Password</option>
  </select>
  <button id="addFieldBtn" type="button">Add</button>

  <!-- Generated Form -->
  <form id="dynamicForm">
    <h3>Generated Form</h3>
    <div id="formFields"></div>
    <button type="submit">Submit</button>
  </form>

  <script>
    const addFieldBtn = document.getElementById("addFieldBtn");
    const fieldTypeSelect = document.getElementById("fieldType");
    const formFields = document.getElementById("formFields");
    const form = document.getElementById("dynamicForm");

    // Regex validators
    const validators = {
      text: /^[A-Za-z\s]{3,}$/,                   // Only alphabets, min 3 chars
      email: /^[^@\s]+@[^@\s]+\.[^@\s]+$/,       // Simple email format
      password: /^(?=.*[A-Za-z])(?=.*\d).{6,}$/  // At least 6 chars, 1 letter, 1 number
    };

    // Function to add validation on input
    function addValidation(input, type, msgSpan) {
      input.addEventListener("input", () => {
        if (validators[type].test(input.value)) {
          msgSpan.textContent = "✅ Valid " + type;
          msgSpan.className = "message success";
        } else {
          msgSpan.textContent = "❌ Invalid " + type;
          msgSpan.className = "message error";
        }
      });
    }

    // Add new input field dynamically
    addFieldBtn.addEventListener("click", () => {
      const type = fieldTypeSelect.value;

      const div = document.createElement("div");
      div.classList.add("form-group");

      const label = document.createElement("label");
      label.textContent = type.charAt(0).toUpperCase() + type.slice(1) + ":";

      const input = document.createElement("input");
      input.type = type;
      input.placeholder = "Enter " + type;

      const msgSpan = document.createElement("span");
      msgSpan.classList.add("message");

      div.appendChild(label);
      div.appendChild(input);
      div.appendChild(msgSpan);
      formFields.appendChild(div);

      addValidation(input, type, msgSpan);
    });

    // Validate all inputs before submission
    form.addEventListener("submit", (event) => {
      const inputs = form.querySelectorAll("input");
      let valid = true;

      inputs.forEach(input => {
        const type = input.type;
        const msgSpan = input.nextElementSibling;

        if (!validators[type].test(input.value)) {
          msgSpan.textContent = "❌ Invalid " + type;
          msgSpan.className = "message error";
          valid = false;
        }
      });

      if (!valid) {
        event.preventDefault();
        alert("⚠️ Please correct invalid fields before submitting.");
      } else {
        alert("✅ Form submitted successfully!");
      }
    });
  </script>

</body>
</html>
